# Streamlit í¬íŠ¸í´ë¦¬ì˜¤ ëŒ€ì‹œë³´ë“œ

ì¸í„°ë™í‹°ë¸Œ ì›¹ ê¸°ë°˜ í¬íŠ¸í´ë¦¬ì˜¤ ë¶„ì„ ëŒ€ì‹œë³´ë“œ

## ëª©ì°¨

- [ë¹ ë¥¸ ì‹œì‘](#ë¹ ë¥¸-ì‹œì‘)
- [ê¸°ëŠ¥ ì†Œê°œ](#ê¸°ëŠ¥-ì†Œê°œ)
- [í˜ì´ì§€ êµ¬ì¡°](#í˜ì´ì§€-êµ¬ì¡°)
- [ì‚¬ìš© ê°€ì´ë“œ](#ì‚¬ìš©-ê°€ì´ë“œ)
- [ì„¤ì • ë° ì»¤ìŠ¤í„°ë§ˆì´ì§•](#ì„¤ì •-ë°-ì»¤ìŠ¤í„°ë§ˆì´ì§•)
- [ë¬¸ì œ í•´ê²°](#ë¬¸ì œ-í•´ê²°)

---

## ë¹ ë¥¸ ì‹œì‘

### 1. ì•± ì‹¤í–‰

```bash
# í”„ë¡œì íŠ¸ ë£¨íŠ¸ì—ì„œ
streamlit run app.py
```

### 2. ë¸Œë¼ìš°ì € ì ‘ì†

```
http://localhost:8501
```

### 3. ì›” ì„ íƒ í›„ ë¶„ì„ ì‹œì‘

- ìƒë‹¨ ë“œë¡­ë‹¤ìš´ì—ì„œ ë¶„ì„í•  ì›” ì„ íƒ
- ì¢Œì¸¡ ì‚¬ì´ë“œë°”ì—ì„œ í˜ì´ì§€ ì´ë™

---

## ê¸°ëŠ¥ ì†Œê°œ

### ğŸ“… ì›”ë³„ íˆ¬ì ë¹„êµ

**ì£¼ìš” ê¸°ëŠ¥:**
- **4ëŒ€ í•µì‹¬ ì§€í‘œ**: ì´ ìì‚°, ì´ ì›ê¸ˆ, ì´ ìˆ˜ìµ, ìˆ˜ìµë¥ ì„ í•œëˆˆì— íŒŒì•…
- **ìì‚° ë³€ë™ íë¦„**: Waterfall Chartë¡œ ì „ì›” ëŒ€ë¹„ ë³€í™” ì‹œê°í™”
- **ì›”ë³„ ë¹„êµ í…Œì´ë¸”**: ìµœê·¼ 3ê°œì›” ë°ì´í„°ë¥¼ í…Œì´ë¸”ë¡œ ë¹„êµ
- **ìì‚° ì¶”ì´ ì°¨íŠ¸**: ì „ì²´ ê¸°ê°„ì˜ ìì‚° ì¦ê°€ ì¶”ì´ í™•ì¸

**í™œìš© ë°©ë²•:**
1. ì´ë²ˆ ë‹¬ í¬íŠ¸í´ë¦¬ì˜¤ ì„±ê³¼ í™•ì¸
2. ì „ì›” ëŒ€ë¹„ ì¦ê° ì›ì¸ íŒŒì•… (ì¶”ê°€ ì…ê¸ˆ vs í‰ê°€ ì†ìµ)
3. ì¥ê¸° ì¶”ì„¸ í™•ì¸ìœ¼ë¡œ íˆ¬ì ì „ëµ ì ê²€

---

### ğŸ¦ ê³„ì¢Œë³„ í¬íŠ¸í´ë¦¬ì˜¤

**ì£¼ìš” ê¸°ëŠ¥:**
- **ê³„ì¢Œë³„ ì ‘ê¸°/í¼ì¹˜ê¸°**: ê° ê³„ì¢Œë¥¼ ë…ë¦½ì ìœ¼ë¡œ í™•ì¸
- **ë³´ìœ  ì¢…ëª© íƒ­**: ê³„ì¢Œ ë‚´ ë³´ìœ  ìì‚° ëª©ë¡ ë° ë¹„ì¤‘
- **ETF íˆ¬ì‹œ ë¶„ì„ íƒ­**: ETF ë‚´ë¶€ êµ¬ì„± ì¢…ëª© Top 10 í™•ì¸ (í† ê¸€ ë°©ì‹)
- **ì„¹í„° ë¹„ì¤‘ ì°¨íŠ¸**: ê³„ì¢Œë³„ ìì‚° ë¶„í¬ë¥¼ Pie Chartë¡œ ì‹œê°í™”

**í™œìš© ë°©ë²•:**
1. ISA, IRP ë“± ê³„ì¢Œë³„ë¡œ ìì‚° êµ¬ì„± í™•ì¸
2. ETF íˆ¬ì‹œ ê¸°ëŠ¥ìœ¼ë¡œ ê°„ì ‘ ë³´ìœ  ì¢…ëª© íŒŒì•…
3. ê³„ì¢Œë³„ ë¦¬ë°¸ëŸ°ì‹± í•„ìš”ì„± íŒë‹¨

**ETF íˆ¬ì‹œ ê¸°ëŠ¥:**
- í† ê¸€ ë²„íŠ¼ OFF: ì„±ëŠ¥ ìµœì í™” (ë°ì´í„° ë¡œë”© ì•ˆ í•¨)
- í† ê¸€ ë²„íŠ¼ ON: ETF ë‚´ë¶€ ì¢…ëª© Top 10 í‘œì‹œ
- í•œêµ­ ì£¼ì‹ì€ ì¢…ëª©ëª… í‘œì‹œ (ì˜ˆ: ì‚¼ì„±ì „ì (005930.KS))
- OTHERì€ ê°€ì¥ í•˜ë‹¨ì— í‘œì‹œ

---

### ğŸ† ì „ì²´ í¬íŠ¸í´ë¦¬ì˜¤

**ì£¼ìš” ê¸°ëŠ¥:**
- **ìì‚° ìœ í˜•ë³„ ìš”ì•½**: STOCK/BOND/CASH ë¹„ì¤‘ í•œëˆˆì— íŒŒì•…
- **Sunburst Chart**: ê³„ì¸µì  ìì‚° êµ¬ì¡° ì‹œê°í™” (í´ë¦­ ì‹œ ë“œë¦´ë‹¤ìš´)
- **ì¢…ëª© ê²€ìƒ‰**: ì§ì ‘ ë³´ìœ  + ETF ë‚´ ê°„ì ‘ ë³´ìœ  í†µí•© ê²€ìƒ‰
- **í†µí•© ì„¹í„° ë¹„ì¤‘**: ì „ì²´ í¬íŠ¸í´ë¦¬ì˜¤ì˜ ì„¹í„° ë¶„í¬ í™•ì¸
- **Top 20 ë³´ìœ  ì¢…ëª©**: ê¸ˆì•¡ ìˆœ ìƒìœ„ ì¢…ëª© ë­í‚¹

**í™œìš© ë°©ë²•:**
1. ì „ì²´ ìì‚°ì˜ ìœ„í—˜ë„ í™•ì¸ (ì£¼ì‹/ì±„ê¶Œ/í˜„ê¸ˆ ë¹„ìœ¨)
2. íŠ¹ì • ì¢…ëª©ì˜ ì „ì²´ ë³´ìœ ëŸ‰ í™•ì¸ (ê²€ìƒ‰ ê¸°ëŠ¥)
3. ì„¹í„° ì§‘ì¤‘ë„ í™•ì¸ ë° ë¶„ì‚° íˆ¬ì ì ê²€

**ì¢…ëª© ê²€ìƒ‰ ê¸°ëŠ¥:**
- í‹°ì»¤ ì…ë ¥: AAPL, SPY, 005930.KS ë“±
- ì§ì ‘ ë³´ìœ : ì§ì ‘ ë§¤ìˆ˜í•œ ê¸ˆì•¡
- ETF í†µí•´: ETFì— í¬í•¨ë˜ì–´ ê°„ì ‘ ë³´ìœ í•˜ëŠ” ê¸ˆì•¡
- ì´ ë³´ìœ : ì§ì ‘ + ê°„ì ‘ í•©ê³„

---

## í˜ì´ì§€ êµ¬ì¡°

```
app.py (ë©”ì¸ ì•±)
â”œâ”€â”€ ì‚¬ì´ë“œë°”: í˜ì´ì§€ ë„¤ë¹„ê²Œì´ì…˜
â”œâ”€â”€ í—¤ë”: ì›” ì„ íƒ ë“œë¡­ë‹¤ìš´
â””â”€â”€ ë©”ì¸ ì½˜í…ì¸ 
    â”œâ”€â”€ ì›”ë³„ íˆ¬ì ë¹„êµ (monthly_comparison.py)
    â”œâ”€â”€ ê³„ì¢Œë³„ í¬íŠ¸í´ë¦¬ì˜¤ (account_portfolio.py)
    â””â”€â”€ ì „ì²´ í¬íŠ¸í´ë¦¬ì˜¤ (total_portfolio.py)
```

### ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
streamlit_app/
â”œâ”€â”€ config.py               # ì„¤ì • (ìƒ‰ìƒ, ìºì‹± ë“±)
â”œâ”€â”€ data_loader.py          # ë°ì´í„° ë¡œë”© + ìºì‹±
â”œâ”€â”€ components/
â”‚   â””â”€â”€ charts.py           # Plotly ì°¨íŠ¸ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ monthly_comparison.py
â”‚   â”œâ”€â”€ account_portfolio.py
â”‚   â””â”€â”€ total_portfolio.py
â””â”€â”€ utils/
    â”œâ”€â”€ formatters.py       # ìˆ«ì/ë‚ ì§œ í¬ë§·íŒ…
    â””â”€â”€ state.py            # ì„¸ì…˜ ìƒíƒœ ê´€ë¦¬
```

---

## ì‚¬ìš© ê°€ì´ë“œ

### ì›” ì„ íƒ

**ë°©ë²• 1: ë“œë¡­ë‹¤ìš´**
- ìƒë‹¨ "ë¶„ì„ ì›” ì„ íƒ" ë“œë¡­ë‹¤ìš´ í´ë¦­
- ì›í•˜ëŠ” ì›” ì„ íƒ

**ì„ íƒí•œ ì›” ìœ ì§€:**
- í˜ì´ì§€ ì´ë™ ì‹œì—ë„ ì„ íƒí•œ ì›” ìœ ì§€
- ìƒˆë¡œê³ ì¹¨ ì‹œ ìµœì‹  ì›”ë¡œ ì´ˆê¸°í™”

---

### í˜ì´ì§€ ì´ë™

**ì‚¬ì´ë“œë°” ë©”ë‰´:**
- ì›”ë³„ íˆ¬ì ë¹„êµ
- ê³„ì¢Œë³„ í¬íŠ¸í´ë¦¬ì˜¤
- ì „ì²´ í¬íŠ¸í´ë¦¬ì˜¤

**íŒ:**
- ì‚¬ì´ë“œë°” ë²„íŠ¼ í´ë¦­ìœ¼ë¡œ ì¦‰ì‹œ ì´ë™
- ê° í˜ì´ì§€ëŠ” ë…ë¦½ì ìœ¼ë¡œ ë™ì‘

---

### í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤

**ì‚¬ì´ë“œë°” ë©”ë‰´ ëŒ€ì‹  í‚¤ë³´ë“œë¡œ ë¹ ë¥´ê²Œ ì•±ì„ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**

- `1`: **ì›”ë³„ íˆ¬ì ë¹„êµ** í˜ì´ì§€ë¡œ ì´ë™
- `2`: **ê³„ì¢Œë³„ í¬íŠ¸í´ë¦¬ì˜¤** í˜ì´ì§€ë¡œ ì´ë™
- `3`: **ì „ì²´ í¬íŠ¸í´ë¦¬ì˜¤** í˜ì´ì§€ë¡œ ì´ë™
- `â†’` (ì˜¤ë¥¸ìª½ í™”ì‚´í‘œ): **ë‹¤ìŒ ì›”** ì„ íƒ
- `â†` (ì™¼ìª½ í™”ì‚´í‘œ): **ì´ì „ ì›”** ì„ íƒ
- `F`: **'ì „ì²´ ê¸°ê°„'** ì„ íƒ

---

### ì°¨íŠ¸ ì¸í„°ë™ì…˜

**Plotly ì°¨íŠ¸ ê¸°ëŠ¥:**
- **ì¤Œ**: ë§ˆìš°ìŠ¤ ë“œë˜ê·¸ë¡œ í™•ëŒ€
- **íŒ¬**: Shift + ë“œë˜ê·¸ë¡œ ì´ë™
- **í˜¸ë²„**: ë§ˆìš°ìŠ¤ ì˜¬ë¦¬ë©´ ìƒì„¸ ì •ë³´ í‘œì‹œ
- **ë¦¬ì…‹**: ë”ë¸” í´ë¦­ìœ¼ë¡œ ì›ë˜ í¬ê¸°

**Sunburst Chart ë“œë¦´ë‹¤ìš´:**
1. ì›í•˜ëŠ” ì„¹í„° í´ë¦­
2. í•´ë‹¹ ì„¹í„°ê°€ ì¤‘ì‹¬ìœ¼ë¡œ í™•ëŒ€
3. ì¤‘ì‹¬ í´ë¦­í•˜ë©´ ìƒìœ„ë¡œ ë³µê·€

---

## ì„¤ì • ë° ì»¤ìŠ¤í„°ë§ˆì´ì§•

### config.py ìˆ˜ì •

**ìƒ‰ìƒ ë³€ê²½:**
```python
COLORS = {
    'STOCK': '#3498db',  # ì£¼ì‹ ìƒ‰ìƒ
    'BOND': '#2ecc71',   # ì±„ê¶Œ ìƒ‰ìƒ
    'CASH': '#f39c12',   # í˜„ê¸ˆ ìƒ‰ìƒ
}
```

**ìºì‹± ì‹œê°„ ì¡°ì •:**
```python
CACHE_TTL = {
    'monthly_data': 3600,   # 1ì‹œê°„ (ê¸°ë³¸ê°’)
    'etf_data': 86400,      # 24ì‹œê°„ (ê¸°ë³¸ê°’)
}
```

**ë°ì´í„° ì œí•œ ë³€ê²½:**
```python
DATA_LIMITS = {
    'etf_lookthrough_top_n': 10,  # ETF íˆ¬ì‹œ Top N
    'total_holdings_top_n': 20,   # ì „ì²´ ë³´ìœ  Top N
}
```

---

### ì°¨íŠ¸ ë†’ì´ ì¡°ì •

**components/charts.py ìˆ˜ì •:**
```python
CHART_DEFAULTS = {
    'height': 400,  # ê¸°ë³¸ ë†’ì´ (í”½ì…€)
}
```

---

## ë¬¸ì œ í•´ê²°

### ë°ì´í„°ê°€ ì—†ë‹¤ê³  ë‚˜ì™€ìš”

**ì›ì¸:**
- DBì— í•´ë‹¹ ì›” ë°ì´í„°ê°€ ì—†ìŒ

**í•´ê²°:**
```bash
# ì›”ë³„ ë°ì´í„° ì„í¬íŠ¸
python import_monthly_data.py monthly/2025-12.yaml --overwrite
python analyze_portfolio.py --month 2025-12 --overwrite
```

---

### ì°¨íŠ¸ê°€ ì•ˆ ë³´ì—¬ìš”

**ì›ì¸:**
- ë°ì´í„°ê°€ ë¹„ì–´ìˆê±°ë‚˜ ì—ëŸ¬ ë°œìƒ

**í•´ê²°:**
1. ë¸Œë¼ìš°ì € ì½˜ì†” í™•ì¸ (F12)
2. Streamlit í„°ë¯¸ë„ ë¡œê·¸ í™•ì¸
3. ìºì‹œ ì‚­ì œ: ì•± ìš°ì¸¡ ìƒë‹¨ ë©”ë‰´ > Clear cache

---

### ETF íˆ¬ì‹œê°€ ëŠë ¤ìš”

**ì›ì¸:**
- yfinance API ì†ë„ ì œí•œ

**í•´ê²°:**
- ì´ë¯¸ 24ì‹œê°„ ìºì‹± ì ìš©ë¨
- í† ê¸€ì„ í•„ìš”í•  ë•Œë§Œ ì¼œê¸°
- `config.py`ì—ì„œ `CACHE_TTL['etf_data']` ì¦ê°€

---

### í˜ì´ì§€ê°€ ìë™ ìƒˆë¡œê³ ì¹¨ë¼ìš”

**ì›ì¸:**
- Streamlit íŒŒì¼ ë³€ê²½ ê°ì§€

**í•´ê²°:**
```bash
# ìë™ ìƒˆë¡œê³ ì¹¨ ë¹„í™œì„±í™”
streamlit run app.py --server.runOnSave false
```

---

## ì„±ëŠ¥ ìµœì í™” íŒ

### 1. ìºì‹± í™œìš©

**ìë™ ìºì‹±:**
- ëª¨ë“  ë°ì´í„° ë¡œë”© í•¨ìˆ˜ëŠ” `@st.cache_data` ì ìš©
- ê°™ì€ ë°ì´í„° ì¬ìš”ì²­ ì‹œ DB ì¿¼ë¦¬ ìƒëµ

**ìºì‹œ ìˆ˜ë™ ì‚­ì œ:**
- ì•± ìš°ì¸¡ ìƒë‹¨ ë©”ë‰´ > Clear cache
- ë˜ëŠ” `C` í‚¤ ëˆ„ë¥´ê¸°

---

### 2. Top N ì œí•œ

**ê¸°ë³¸ ì„¤ì •:**
- ETF íˆ¬ì‹œ: Top 10
- ì „ì²´ ë³´ìœ  ì¢…ëª©: Top 20

**ë³€ê²½ ë°©ë²•:**
`config.py`ì˜ `DATA_LIMITS` ìˆ˜ì •

---

### 3. í† ê¸€ ë°©ì‹ ë¡œë”©

**ETF íˆ¬ì‹œ:**
- ê¸°ë³¸ OFF: ë°ì´í„° ë¡œë”© ì•ˆ í•¨
- ON ì‹œì—ë§Œ ë¡œë”©: ì„±ëŠ¥ í–¥ìƒ

---

## ë°°í¬ ì˜µì…˜

### Streamlit Cloud (ë¬´ë£Œ)

1. GitHub ë ˆí¬ ìƒì„± ë° í‘¸ì‹œ
2. [streamlit.io/cloud](https://streamlit.io/cloud) ì ‘ì†
3. ë ˆí¬ ì—°ê²° ë° ë°°í¬

**requirements.txt í•„ìˆ˜:**
```
streamlit>=1.28.0
plotly>=5.18.0
pandas>=2.0.0
```

---

### Docker

```dockerfile
FROM python:3.11-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install -r requirements.txt

COPY . .

EXPOSE 8501

CMD ["streamlit", "run", "app.py"]
```

---

## ì°¸ê³  ìë£Œ

- [Streamlit ê³µì‹ ë¬¸ì„œ](https://docs.streamlit.io)
- [Plotly ì°¨íŠ¸ ê°¤ëŸ¬ë¦¬](https://plotly.com/python/)
- [í”„ë¡œì íŠ¸ ARCHITECTURE.md](./ARCHITECTURE.md)
- [ë©”ì¸ README.md](../README.md)

---

**Made with â¤ï¸ for better portfolio management**
